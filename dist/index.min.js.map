{"version":3,"file":"index.min.js","sources":["index.js"],"sourcesContent":["const String = window.String;\n\nconst Reflect = window.Reflect;\n\nconst {get: get, set: set} = Reflect;\n\nconst valuestring = \"value\";\n\nfunction isobject(a) {\n    return typeof a === \"object\" && a !== null;\n}\n\nfunction isstring(a) {\n    return typeof a === \"string\";\n}\n\nfunction isArray(a) {\n    return Array.isArray(a);\n}\n\nfunction isSet(a) {\n    return a instanceof Set;\n}\n\nfunction objtostylestring(o) {\n    return Object.entries(o).map(([key, value]) => key + \":\" + value).join(\";\");\n}\n\nfunction asserthtmlelement(ele) {\n    if (!(ele instanceof Element)) {\n        throw TypeError(\"invalid HTMLElement!\");\n    } else return true;\n}\n\nfunction createeleattragentreadwrite(ele) {\n    asserthtmlelement(ele);\n    const isinputtextortextareaflag = isinputtextortextarea(ele);\n    const isinputcheckbox = \"input\" === geteletagname(ele) && get(ele, \"type\") === \"checkbox\";\n    var temp = Object.create(null);\n    const outputattrs = new Proxy(temp, {\n        ownKeys() {\n            const keys = attributesownkeys(ele);\n            return Array.from(new Set([ isinputcheckbox ? \"checked\" : undefined, isinputtextortextareaflag ? Array.from(new Set([ ...keys, valuestring ])) : keys ].flat(Infinity).filter(a => !!a)));\n        },\n        get(target, key) {\n            if (isinputcheckbox && key === \"checked\") {\n                return get(ele, \"checked\");\n            }\n            if (isinputtextortextareaflag && key === valuestring) {\n                return get(ele, valuestring);\n            } else {\n                const v = getattribute(ele, String(key));\n                if (v === \"\") {\n                    return true;\n                }\n                if (v === null) {\n                    return;\n                }\n                if (isstring(v)) {\n                    try {\n                        return JSON.parse(String(v));\n                    } catch (error) {\n                        return v;\n                    }\n                } else return;\n            }\n        },\n        set(t, key, v) {\n            if (\"function\" === typeof v) {\n                console.error(v);\n                throw TypeError(\"Setting properties as functions is not allowed\");\n            }\n            if (geteletagname(ele) === \"input\" && key === \"checked\") {\n                set(ele, key, v);\n                return true;\n            }\n            if (isinputtextortextareaflag && key === valuestring) {\n                return set(ele, valuestring, v);\n            } else if (key === \"style\") {\n                setattribute(ele, String(key), isstring(v) ? v : isobject(v) ? objtostylestring(v) : String(v));\n                return true;\n            } else if (key === \"class\" && isobject(v)) {\n                if (isArray(v)) {\n                    setattribute(ele, String(key), v.join(\" \"));\n                } else if (isSet(v)) {\n                    setattribute(ele, String(key), [ ...v ].join(\" \"));\n                } else {\n                    setattribute(ele, String(key), JSON.stringify(v));\n                }\n            } else {\n                if (isSet(v)) {\n                    setattribute(ele, String(key), JSON.stringify([ ...v ]));\n                } else {\n                    if (v === true) {\n                        v = \"\";\n                    }\n                    setattribute(ele, String(key), isobject(v) ? JSON.stringify(v) : String(v));\n                    return true;\n                }\n            }\n            return true;\n        },\n        deleteProperty(t, k) {\n            removeAttribute(ele, String(k));\n            return true;\n        },\n        has(target, key) {\n            if (isinputtextortextareaflag && key === valuestring) {\n                return true;\n            } else {\n                return hasAttribute(ele, String(key));\n            }\n        },\n        defineProperty() {\n            return false;\n        },\n        getOwnPropertyDescriptor(target, key) {\n            const otherdescipter = {\n                enumerable: true,\n                configurable: true,\n                writable: true\n            };\n            const myvalue = get(outputattrs, key);\n            if (typeof myvalue !== \"undefined\") {\n                return {\n                    value: myvalue,\n                    ...otherdescipter\n                };\n            } else {\n                return;\n            }\n        },\n        setPrototypeOf() {\n            return false;\n        }\n    });\n    return outputattrs;\n}\n\nfunction attributesownkeys(ele) {\n    return ele.getAttributeNames();\n}\n\nfunction getattribute(ele, key) {\n    return ele.getAttribute(key);\n}\n\nfunction geteletagname(ele) {\n    return ele.tagName.toLowerCase();\n}\n\nfunction setattribute(ele, key, value) {\n    return ele.setAttribute(key, value);\n}\n\nfunction removeAttribute(ele, key) {\n    return ele.removeAttribute(key);\n}\n\nfunction hasAttribute(ele, key) {\n    return ele.hasAttribute(key);\n}\n\nfunction isinputtextortextarea(ele) {\n    const tagname = geteletagname(ele);\n    return tagname === \"input\" && get(ele, \"type\") === \"text\" || tagname === \"textarea\";\n}\n\nexport default createeleattragentreadwrite;\n//# sourceMappingURL=index.js.map\n"],"names":["String","window","Reflect","get","set","valuestring","isobject","a","isstring","isSet","Set","geteletagname","ele","tagName","toLowerCase","setattribute","key","value","setAttribute","Element","TypeError","asserthtmlelement","isinputtextortextareaflag","tagname","isinputtextortextarea","isinputcheckbox","temp","Object","create","outputattrs","Proxy","[object Object]","keys","getAttributeNames","attributesownkeys","Array","from","undefined","flat","Infinity","filter","target","v","getAttribute","getattribute","JSON","parse","error","t","o","entries","map","join","isArray","stringify","deleteProperty","k","removeAttribute","has","hasAttribute","defineProperty","otherdescipter","enumerable","configurable","writable","myvalue","setPrototypeOf"],"mappings":"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"}